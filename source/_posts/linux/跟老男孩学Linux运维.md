# 1. Linux命令行概述

​	在命令行执行exit或logout命令可退出命令行（如图1-5所示），当然也可以使用快捷键Ctrl+d退出命令行，退出命令行之后，如果需要再次登录，则还是需要输入用户名和密码（除非使用SSH客户端已将用户名和密码保存起来）。

## 1.1 Linux命令行概述

### 1.1.4 Linux命令行提示符介绍

![](https://pic.imgdb.cn/item/6272479709475431291d3d14.jpg)

1）#号，是使用超级用户root登录后的命令行结尾提示符，而$号是使用普通用户登录后的命令行结尾提示符。

2）超级用户具有管理系统的所有权限，普通用户的权限比较小，只能进行基本的系统信息查看等操作，无法更改系统配置和管理服务。

3）命令行提示符@前面的字符代表当前登录的用户（可用whoami查询），@后面的为主机名（可用hostname查询），~所在的位置是窗口当前用户所在的路径。示例代码如下：

4）Linux命令提示符由PS1环境变量控制。示例代码如下：

![](https://pic.imgdb.cn/item/627247ca09475431291db80a.jpg)	

​	这里的PS1='[\u@\h\W]\$'，可以通过全局配置文件/etc/bashrc或/etc/profile进行按需配置和调整。

### 1.1.5 Linux命令行常用快捷键

![](https://pic.imgdb.cn/item/6272481609475431291e61cb.jpg)

![](https://pic.imgdb.cn/item/6272482109475431291e7e7f.jpg)

​	注：上述快捷键适用于SecureCRT和Xshell客户端。其中带有符号“*”的为常用快捷键。

## 1.2 在Linux命令行下查看命令帮助

### 1.2.1 使用man获取命令帮助信息

**1.man命令的基本语法**

man命令是Linux系统中最核心的命令之一，因为通过它可以查看其他Linux命令的使用信息。当然了，man命令不仅可以查看命令的使用帮助，还可以查看软件服务配置文件、系统调用、库函数等的帮助信息。

```
man 参数选项 命令/文件
```

![](https://pic.imgdb.cn/item/627248b009475431291fe8c4.jpg)

**2.利用man查阅命令帮助内容的格式说明**

表1-3 执行“man命令”后帮助内容中的标题介绍

![](https://pic.imgdb.cn/item/627248cc09475431292022fd.jpg)

**3.进入man帮助页面中的快捷键功能说明**

​	执行“man命令”进入到man帮助页面中，实际上就相当于浏览一个文本文件，可以利用表1-4中的快捷键快速查阅想要查找的内容。

![](https://pic.imgdb.cn/item/627248f80947543129208b0f.jpg)

### 1.2.2 使用--help参数获取命令帮助信息

​	除了可以使用“man命令”查看命令的帮助信息以外，还可以使用“命令--help”查看命令的使用信息（如图1-6所示），虽然有时这个输出很简单，但是相应地查看起来也会更方便。

​	可能有读者会感到奇怪，咦，图1-6中怎么是中文显示？其实，这是调整了中文字符集的结果，其实就是调整系统字符集为“zh_CN.UTF-8”，示例如下：

![](https://pic.imgdb.cn/item/6272492c0947543129210461.jpg)

### 1.2.3 使用help命令获取bash内置命令帮助

​	在Linux系统里有一些特殊的命令，它们就是bash程序的内置命令，例如cd、history、read等，这些命令在系统目录里不存在真实的程序文件（存在于bash程序里），对于这部分命令，查看帮助的方法就是使用help命令，例如：

### inux各种内置命令的讲解详见后文。

​	Linux系统中的info命令是一个查看程序对应文档信息的命令，可以作为man及help命令的帮助补充，不过一般在企业运维工作中，很少会有机会需要使用info去查询命令的使用帮助，因此，知道有这个命令就可以了，普通读者无需关注太多。使用info命令查看命令帮助的语法操作和man类似，示例如下：

```sh
info ls
```

## 1.3 Linux关机、重启、注销命令

shutdown是一个用来安全关闭或重启Linux系统的命令，系统在关闭之前会通知所有的登录用户，系统即将关闭，此时所有的新用户都不可以登录，与shutdown功能类似的命令还有init、halt、poweroff、reboot。

![](https://pic.imgdb.cn/item/62724983094754312921d3a4.jpg)

范例1-2：关机或重启系统的常见操作。一分钟后关闭Linux系统的命令如下：

```sh
shutdown -h +1
```

11点整重启Linux系统的命令如下：

```sh
shutdown -r 11:00
```

### 1.3.2 关机与重启命令：halt/poweroff/reboot

​	从RedHat或CentOS 6开始，你会发现halt、poweroff、reboot这三个命令对应的都是同一个man帮助文档，而halt和poweroff命令是reboot命令的链接文件，因此本书也把这三个命令放在一起讲解。

​	读者看一下reboot命令的man帮助，可以发现reboot命令有2个参数--halt和--power-off，作用分别和halt、poweroff命令一样。

### 1.3.3 关机、重启和注销的命令列表

![](https://pic.imgdb.cn/item/62724a20094754312923460c.jpg)

# 第2章 文件和目录操作命令

## 2.1 pwd

1）注意pwd命令和后面的选项之间至少要有一个空格。

2）通常情况下，执行pwd命令不需要带任何参数。

![](https://pic.imgdb.cn/item/62724a56094754312923bc94.jpg)

## 2.2 cd：切换目录

​	cd命令是“change directory”中每个单词的首字母缩写，其功能是从当前工作目录切换到指定的工作目录。

![](https://pic.imgdb.cn/item/62774f31094754312974725e.jpg)

![](https://pic.imgdb.cn/item/62774f46094754312974b137.jpg)

## 2.3 tree：以树形结构显示目录下的内容

​	tree命令的中文意思为“树”，功能是以树形结构列出指定目录下的所有内容，包括所有文件、子目录及子目录里的目录和文件。

![](https://pic.imgdb.cn/item/62774f6b09475431297515cb.jpg)

第二步，调整系统字符集，防止树形结构显示乱码。

在使用树形结构时，很可能会因为字符集导致出现乱码问题，比如导致树形的树枝部分都是问号，例如：

![](https://pic.imgdb.cn/item/62774f9309475431297582fb.jpg)

## 2.4 mkdir：创建目录

​	mkdir命令是“make directories”中每个单词的粗体字母组合而成，其功能是创建目录，默认情况下，如果要创建的目录已存在，则会提示此文件已存在；而不会继续创建目录。

![](https://pic.imgdb.cn/item/62774fe00947543129768735.jpg)

![](https://pic.imgdb.cn/item/62774ffe094754312976ecb5.jpg)

范例2-19：同时创建多个目录及多级子目录。

在生产环境中，常常需要创建目录用来存放文件，如果同时创建多个目录并且每个目录下面可能还有多个子目录，那就需要执行多遍mkdir命令，这种做法比较笨。事实上，我们可以使用mkdir命令同时创建多个多级目录，具体命令操作如下：

![](https://pic.imgdb.cn/item/627750290947543129779b65.jpg)

**扩展知识：**

大括号（{}）的特殊用法。

在{}中使用逗号分隔多个字符或单词时，使用echo命令可以将这些被分隔的字符或单词分别输出到屏幕上，示例如下：

![](https://pic.imgdb.cn/item/6277506c09475431297881f3.jpg)

**范例2-20：克隆目录结构。**

需求：如果写了一个Shell脚本，准备对某个目录（假如目录很大，几百个GB）做一些操作，那么，在此之前必须要先测试脚本，以确定它是否正确，而这就需要先搭建一个模拟环境了，当然，目录结构也需要复制过去，方法如下。

![](https://pic.imgdb.cn/item/627750da09475431297a2ac8.jpg)

## 2.5 touch：创建空文件或改变文件的时间戳属性

touch命令有两个功能：一是创建新的空文件；二是改变已有文件的时间戳属性。

![](https://pic.imgdb.cn/item/6277515e09475431297c213e.jpg)

### 2.5.3 扩展知识

GNU/Linux的文件有3种类型的时间戳：

![](https://pic.imgdb.cn/item/6277522e09475431297f20f0.jpg)